var PaygilantSDKLibrary=function(e){"use strict";function n(e,n,t,i){return new(t||(t=Promise))((function(s,o){function r(e){try{a(i.next(e))}catch(e){o(e)}}function c(e){try{a(i.throw(e))}catch(e){o(e)}}function a(e){var n;e.done?s(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(r,c)}a((i=i.apply(e,n||[])).next())}))}function t(e,n){var t,i,s,o,r={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(c){return function(a){return function(c){if(t)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(r=0)),r;)try{if(t=1,i&&(s=2&c[0]?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[2&c[0],s.value]),c[0]){case 0:case 1:s=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(!(s=r.trys,(s=s.length>0&&s[s.length-1])||6!==c[0]&&2!==c[0])){r=0;continue}if(3===c[0]&&(!s||c[1]>s[0]&&c[1]<s[3])){r.label=c[1];break}if(6===c[0]&&r.label<s[1]){r.label=s[1],s=c;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(c);break}s[2]&&r.ops.pop(),r.trys.pop();continue}c=n.call(e,r)}catch(e){c=[6,e],i=0}finally{t=s=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,a])}}}"function"==typeof SuppressedError&&SuppressedError;var i=null;function s(e){var n="https://fpjscdn.net/v3/".concat(e,"/iife.min.js");return i||(i=new Promise((function(e,t){if(window.FingerprintJS&&void 0!==window.FingerprintJS)e();else{var i=document.createElement("script");i.src=n,i.async=!0,i.onload=function(){window.FingerprintJS?e():t(new Error("FpJS is not defined even after script load."))},i.onerror=function(){return t(new Error("Failed to load FpJS script"))},document.head.appendChild(i)}})))}var o=function(){function e(){}return e.prototype.loadScript=function(e){return n(this,void 0,void 0,(function(){return t(this,(function(n){switch(n.label){case 0:return[4,s(e)];case 1:return n.sent(),[2]}}))}))},e}(),r=function(){function e(){this.fpPromise=null,this.visitorId=null,this.fpjsInitializer=new o}return e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.prototype.getDeviceId=function(e){return n(this,void 0,void 0,(function(){var n,i;return t(this,(function(t){switch(t.label){case 0:return t.trys.push([0,6,,7]),this.visitorId?[2,this.visitorId]:[4,this.fpjsInitializer.loadScript(e)];case 1:return t.sent(),!this.fpPromise&&window.FingerprintJS&&(this.fpPromise=window.FingerprintJS.load()),this.fpPromise?[4,this.fpPromise]:[3,4];case 2:return[4,t.sent().get()];case 3:return n=t.sent(),this.visitorId=n.visitorId,[2,n.visitorId];case 4:throw new Error("FpJS could not be loaded");case 5:return[3,7];case 6:throw i=t.sent(),console.error("Paygilant SDK Error: ",i),i;case 7:return[2]}}))}))},e}(),c=function(){function e(){this.sessionIdKey="pgsdk_session_id",this.sessionId=null,this.initializeSessionId()}return e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.prototype.initializeSessionId=function(){var e=localStorage.getItem(this.sessionIdKey);return e?this.sessionId=e:(this.sessionId=this.generateSessionId(),localStorage.setItem(this.sessionIdKey,this.sessionId)),this.sessionId},e.prototype.generateSessionId=function(){var e=new Date;return"web_".concat(e.getTime())},e.prototype.getNewSessionId=function(){return this.clearSessionId(),this.initializeSessionId(),this.getSessionId()},e.prototype.getSessionId=function(){return localStorage.getItem(this.sessionIdKey)||this.sessionId||this.initializeSessionId()},e.prototype.clearSessionId=function(){this.sessionId=null,localStorage.removeItem(this.sessionIdKey)},e}(),a=function(){function e(n){e.deviceIdentifier=r.getInstance(),e.sessionManager=c.getInstance(),e.fpJsApiKey=n}return e.load=function(n){if(e.instance)return console.log("> SDK: already initialized, returning instance"),new Promise((function(n){n(e.instance)}));if(!n)throw new Error("Load params not present");var t=n.apiKey;if(!t||t.trim().length<1)throw new Error("API Key required");return console.log("> SDK: initialized"),e.instance=new e(t),this.loadFields().then((function(){return e.instance}))},e.loadFields=function(){return n(this,void 0,void 0,(function(){var e,n;return t(this,(function(t){switch(t.label){case 0:return e=this.sessionManager.getSessionId(),[4,this.deviceIdentifier.getDeviceId(this.fpJsApiKey)];case 1:return n=t.sent(),this.sessionId=e,this.deviceId=n,console.log("> SDK: loaded with Session ID: ".concat(e,"; Device ID: ").concat(n)),[2]}}))}))},e.prototype.getResult=function(){return{sessionId:e.sessionId,deviceId:e.deviceId}},e.prototype.getDeviceId=function(){return this.checkIfSdkInstanceLoaded(),e.deviceId},e.prototype.getSessionId=function(){return this.checkIfSdkInstanceLoaded(),e.sessionId},e.prototype.clearSessionIdAndGetNew=function(){return this.clearSessionId(),console.log("sdk: returning new sessionId"),e.sessionId},e.prototype.clearSessionId=function(){console.log("sdk: session cleared"),this.checkIfSdkInstanceLoaded(),e.sessionId=e.sessionManager.getNewSessionId()},e.prototype.checkIfSdkInstanceLoaded=function(){if(!e.instance)throw new Error("PaygilantSDK is not loaded.")},e.fpJsApiKey="",e.sessionId="",e.deviceId="",e}();return window.PaygilantSDK=a,e.PaygilantSDK=a,e}({});
